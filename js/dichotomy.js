const NAME = '干员二分器';
const VERSION = '1.00';

const CONTENTS = {
    'settings': {
        'icon': '⚙',
        'title': '设置',
        'file_path': 'settings.html',
    },
    'update_log': {
        'icon': '⚠',
        'title': '更新日志',
        'file_path': 'update_log.html',
    },
    'document': {
        'icon': '📖',
        'title': '文档',
        'file_path': 'document.html',
    },
}

const ALL_OPERATORS_BY_INITIAL = {
    "a": {
        "1": {
            "先锋": [],
            "近卫": [],
            "重装": [],
            "狙击": [],
            "术师": [],
            "医疗": [],
            "辅助": [],
            "特种": []
        },
        "2": {
            "先锋": [],
            "近卫": [],
            "重装": [],
            "狙击": [],
            "术师": [],
            "医疗": [],
            "辅助": [],
            "特种": []
        },
        "3": {
            "先锋": [],
            "近卫": [],
            "重装": [],
            "狙击": [
                "安德切尔"
            ],
            "术师": [],
            "医疗": [
                "安赛尔"
            ],
            "辅助": [],
            "特种": []
        },
        "4": {
            "先锋": [],
            "近卫": [
                "艾丝黛尔"
            ],
            "重装": [],
            "狙击": [
                "安比尔"
            ],
            "术师": [],
            "医疗": [],
            "辅助": [],
            "特种": [
                "暗索",
                "阿消"
            ]
        },
        "5": {
            "先锋": [],
            "近卫": [
                "阿米娅(近卫)"
            ],
            "重装": [],
            "狙击": [
                "安哲拉",
                "奥斯塔",
                "埃拉托"
            ],
            "术师": [
                "阿米娅",
                "爱丽丝"
            ],
            "医疗": [],
            "辅助": [],
            "特种": []
        },
        "6": {
            "先锋": [],
            "近卫": [
                "艾丽妮"
            ],
            "重装": [],
            "狙击": [],
            "术师": [
                "艾雅法拉"
            ],
            "医疗": [],
            "辅助": [
                "安洁莉娜"
            ],
            "特种": [
                "阿",
                "艾拉"
            ]
        }
    },
    "b": {
        "1": {
            "先锋": [],
            "近卫": [],
            "重装": [],
            "狙击": [],
            "术师": [],
            "医疗": [],
            "辅助": [],
            "特种": []
        },
        "2": {
            "先锋": [],
            "近卫": [],
            "重装": [],
            "狙击": [],
            "术师": [],
            "医疗": [],
            "辅助": [],
            "特种": []
        },
        "3": {
            "先锋": [],
            "近卫": [],
            "重装": [
                "斑点"
            ],
            "狙击": [],
            "术师": [],
            "医疗": [],
            "辅助": [],
            "特种": []
        },
        "4": {
            "先锋": [],
            "近卫": [],
            "重装": [],
            "狙击": [
                "白雪"
            ],
            "术师": [
                "布丁"
            ],
            "医疗": [],
            "辅助": [
                "波登可"
            ],
            "特种": []
        },
        "5": {
            "先锋": [],
            "近卫": [
                "暴行",
                "布洛卡",
                "柏喙",
                "鞭刃"
            ],
            "重装": [
                "拜松",
                "暴雨"
            ],
            "狙击": [
                "白金",
                "冰酿"
            ],
            "术师": [
                "薄绿"
            ],
            "医疗": [
                "白面鸮"
            ],
            "辅助": [],
            "特种": [
                "贝娜"
            ]
        },
        "6": {
            "先锋": [],
            "近卫": [
                "百炼嘉维尔"
            ],
            "重装": [],
            "狙击": [],
            "术师": [],
            "医疗": [],
            "辅助": [
                "白铁"
            ],
            "特种": []
        }
    },
    "c": {
        "1": {
            "先锋": [],
            "近卫": [
                "Castle-3"
            ],
            "重装": [],
            "狙击": [],
            "术师": [],
            "医疗": [],
            "辅助": [],
            "特种": []
        },
        "2": {
            "先锋": [],
            "近卫": [],
            "重装": [],
            "狙击": [],
            "术师": [],
            "医疗": [],
            "辅助": [],
            "特种": []
        },
        "3": {
            "先锋": [],
            "近卫": [],
            "重装": [],
            "狙击": [],
            "术师": [],
            "医疗": [],
            "辅助": [],
            "特种": []
        },
        "4": {
            "先锋": [],
            "近卫": [
                "缠丸"
            ],
            "重装": [],
            "狙击": [],
            "术师": [],
            "医疗": [],
            "辅助": [],
            "特种": []
        },
        "5": {
            "先锋": [],
            "近卫": [
                "赤冬",
                "苍苔"
            ],
            "重装": [
                "车尔尼"
            ],
            "狙击": [
                "承曦格雷伊"
            ],
            "术师": [],
            "医疗": [
                "刺玫"
            ],
            "辅助": [
                "初雪"
            ],
            "特种": []
        },
        "6": {
            "先锋": [
                "嵯峨"
            ],
            "近卫": [
                "陈",
                "重岳"
            ],
            "重装": [
                "斥罪"
            ],
            "狙击": [],
            "术师": [
                "澄闪"
            ],
            "医疗": [
                "纯烬艾雅法拉"
            ],
            "辅助": [
                "淬羽赫默"
            ],
            "特种": []
        }
    },
    "d": {
        "1": {
            "先锋": [],
            "近卫": [],
            "重装": [],
            "狙击": [],
            "术师": [],
            "医疗": [],
            "辅助": [],
            "特种": []
        },
        "2": {
            "先锋": [],
            "近卫": [],
            "重装": [],
            "狙击": [],
            "术师": [
                "杜林"
            ],
            "医疗": [],
            "辅助": [],
            "特种": []
        },
        "3": {
            "先锋": [],
            "近卫": [],
            "重装": [],
            "狙击": [],
            "术师": [],
            "医疗": [],
            "辅助": [],
            "特种": []
        },
        "4": {
            "先锋": [
                "豆苗"
            ],
            "近卫": [
                "杜宾",
                "断罪者"
            ],
            "重装": [],
            "狙击": [],
            "术师": [],
            "医疗": [],
            "辅助": [
                "地灵"
            ],
            "特种": []
        },
        "5": {
            "先锋": [
                "德克萨斯"
            ],
            "近卫": [
                "断崖",
                "达格达",
                "铎铃",
                "导火索"
            ],
            "重装": [],
            "狙击": [],
            "术师": [
                "戴菲恩"
            ],
            "医疗": [],
            "辅助": [
                "但书"
            ],
            "特种": []
        },
        "6": {
            "先锋": [],
            "近卫": [],
            "重装": [
                "涤火杰西卡"
            ],
            "狙击": [],
            "术师": [],
            "医疗": [],
            "辅助": [],
            "特种": [
                "多萝西"
            ]
        }
    },
    "e": {
        "1": {
            "先锋": [],
            "近卫": [],
            "重装": [],
            "狙击": [],
            "术师": [],
            "医疗": [],
            "辅助": [],
            "特种": []
        },
        "2": {
            "先锋": [],
            "近卫": [],
            "重装": [],
            "狙击": [],
            "术师": [],
            "医疗": [],
            "辅助": [],
            "特种": []
        },
        "3": {
            "先锋": [],
            "近卫": [],
            "重装": [],
            "狙击": [],
            "术师": [],
            "医疗": [],
            "辅助": [],
            "特种": []
        },
        "4": {
            "先锋": [],
            "近卫": [],
            "重装": [],
            "狙击": [],
            "术师": [],
            "医疗": [],
            "辅助": [],
            "特种": []
        },
        "5": {
            "先锋": [],
            "近卫": [],
            "重装": [],
            "狙击": [],
            "术师": [],
            "医疗": [],
            "辅助": [],
            "特种": []
        },
        "6": {
            "先锋": [],
            "近卫": [],
            "重装": [],
            "狙击": [],
            "术师": [],
            "医疗": [],
            "辅助": [],
            "特种": []
        }
    },
    "f": {
        "1": {
            "先锋": [],
            "近卫": [],
            "重装": [
                "Friston-3"
            ],
            "狙击": [],
            "术师": [],
            "医疗": [],
            "辅助": [],
            "特种": []
        },
        "2": {
            "先锋": [],
            "近卫": [],
            "重装": [],
            "狙击": [],
            "术师": [],
            "医疗": [],
            "辅助": [],
            "特种": []
        },
        "3": {
            "先锋": [
                "芬"
            ],
            "近卫": [],
            "重装": [],
            "狙击": [],
            "术师": [],
            "医疗": [
                "芙蓉"
            ],
            "辅助": [],
            "特种": []
        },
        "4": {
            "先锋": [],
            "近卫": [
                "芳汀"
            ],
            "重装": [],
            "狙击": [],
            "术师": [],
            "医疗": [],
            "辅助": [],
            "特种": []
        },
        "5": {
            "先锋": [],
            "近卫": [
                "芙兰卡"
            ],
            "重装": [],
            "狙击": [],
            "术师": [],
            "医疗": [],
            "辅助": [],
            "特种": [
                "风丸"
            ]
        },
        "6": {
            "先锋": [
                "风笛"
            ],
            "近卫": [],
            "重装": [],
            "狙击": [
                "菲亚梅塔"
            ],
            "术师": [],
            "医疗": [],
            "辅助": [],
            "特种": []
        }
    },
    "g": {
        "1": {
            "先锋": [],
            "近卫": [],
            "重装": [],
            "狙击": [],
            "术师": [],
            "医疗": [],
            "辅助": [],
            "特种": []
        },
        "2": {
            "先锋": [],
            "近卫": [],
            "重装": [],
            "狙击": [],
            "术师": [],
            "医疗": [],
            "辅助": [],
            "特种": []
        },
        "3": {
            "先锋": [],
            "近卫": [],
            "重装": [],
            "狙击": [],
            "术师": [],
            "医疗": [],
            "辅助": [],
            "特种": []
        },
        "4": {
            "先锋": [],
            "近卫": [],
            "重装": [
                "古米"
            ],
            "狙击": [],
            "术师": [
                "格雷伊"
            ],
            "医疗": [],
            "辅助": [],
            "特种": []
        },
        "5": {
            "先锋": [
                "格拉尼"
            ],
            "近卫": [],
            "重装": [],
            "狙击": [],
            "术师": [],
            "医疗": [],
            "辅助": [
                "格劳克斯"
            ],
            "特种": []
        },
        "6": {
            "先锋": [],
            "近卫": [],
            "重装": [],
            "狙击": [],
            "术师": [],
            "医疗": [],
            "辅助": [],
            "特种": [
                "歌蕾蒂娅",
                "归溟幽灵鲨"
            ]
        }
    },
    "h": {
        "1": {
            "先锋": [],
            "近卫": [],
            "重装": [],
            "狙击": [],
            "术师": [],
            "医疗": [],
            "辅助": [],
            "特种": []
        },
        "2": {
            "先锋": [],
            "近卫": [],
            "重装": [
                "黑角"
            ],
            "狙击": [],
            "术师": [],
            "医疗": [],
            "辅助": [],
            "特种": []
        },
        "3": {
            "先锋": [],
            "近卫": [],
            "重装": [],
            "狙击": [],
            "术师": [],
            "医疗": [],
            "辅助": [],
            "特种": []
        },
        "4": {
            "先锋": [
                "红豆"
            ],
            "近卫": [],
            "重装": [],
            "狙击": [
                "红云"
            ],
            "术师": [],
            "医疗": [
                "褐果"
            ],
            "辅助": [],
            "特种": []
        },
        "5": {
            "先锋": [
                "红隼"
            ],
            "近卫": [
                "海沫",
                "火龙S黑角"
            ],
            "重装": [
                "火神",
                "吽",
                "灰毫",
                "火哨"
            ],
            "狙击": [
                "灰喉",
                "寒芒克洛丝"
            ],
            "术师": [
                "和弦",
                "寒檀"
            ],
            "医疗": [
                "赫默",
                "华法琳",
                "哈洛德"
            ],
            "辅助": [
                "海蒂"
            ],
            "特种": [
                "红",
                "槐琥"
            ]
        },
        "6": {
            "先锋": [],
            "近卫": [
                "赫拉格",
                "煌",
                "赫德雷"
            ],
            "重装": [
                "号角"
            ],
            "狙击": [
                "黑",
                "灰烬",
                "鸿雪"
            ],
            "术师": [
                "黑键",
                "霍尔海雅"
            ],
            "医疗": [],
            "辅助": [],
            "特种": []
        }
    },
    "i": {
        "1": {
            "先锋": [],
            "近卫": [],
            "重装": [],
            "狙击": [],
            "术师": [],
            "医疗": [],
            "辅助": [],
            "特种": []
        },
        "2": {
            "先锋": [],
            "近卫": [],
            "重装": [],
            "狙击": [],
            "术师": [],
            "医疗": [],
            "辅助": [],
            "特种": []
        },
        "3": {
            "先锋": [],
            "近卫": [],
            "重装": [],
            "狙击": [],
            "术师": [],
            "医疗": [],
            "辅助": [],
            "特种": []
        },
        "4": {
            "先锋": [],
            "近卫": [],
            "重装": [],
            "狙击": [],
            "术师": [],
            "医疗": [],
            "辅助": [],
            "特种": []
        },
        "5": {
            "先锋": [],
            "近卫": [],
            "重装": [],
            "狙击": [],
            "术师": [],
            "医疗": [],
            "辅助": [],
            "特种": []
        },
        "6": {
            "先锋": [],
            "近卫": [],
            "重装": [],
            "狙击": [],
            "术师": [],
            "医疗": [],
            "辅助": [],
            "特种": []
        }
    },
    "j": {
        "1": {
            "先锋": [],
            "近卫": [],
            "重装": [],
            "狙击": [],
            "术师": [],
            "医疗": [],
            "辅助": [],
            "特种": []
        },
        "2": {
            "先锋": [],
            "近卫": [],
            "重装": [],
            "狙击": [],
            "术师": [],
            "医疗": [],
            "辅助": [],
            "特种": []
        },
        "3": {
            "先锋": [],
            "近卫": [],
            "重装": [],
            "狙击": [],
            "术师": [],
            "医疗": [],
            "辅助": [],
            "特种": []
        },
        "4": {
            "先锋": [],
            "近卫": [
                "杰克"
            ],
            "重装": [
                "角峰",
                "坚雷"
            ],
            "狙击": [
                "杰西卡"
            ],
            "术师": [],
            "医疗": [
                "嘉维尔"
            ],
            "辅助": [],
            "特种": [
                "孑"
            ]
        },
        "5": {
            "先锋": [
                "极境",
                "贾维"
            ],
            "近卫": [],
            "重装": [
                "极光"
            ],
            "狙击": [
                "截云"
            ],
            "术师": [
                "惊蛰"
            ],
            "医疗": [],
            "辅助": [
                "九色鹿"
            ],
            "特种": [
                "见行者"
            ]
        },
        "6": {
            "先锋": [],
            "近卫": [
                "棘刺",
                "锏"
            ],
            "重装": [],
            "狙击": [
                "假日威龙陈"
            ],
            "术师": [],
            "医疗": [],
            "辅助": [],
            "特种": [
                "缄默德克萨斯"
            ]
        }
    },
    "k": {
        "1": {
            "先锋": [],
            "近卫": [],
            "重装": [],
            "狙击": [],
            "术师": [],
            "医疗": [],
            "辅助": [],
            "特种": []
        },
        "2": {
            "先锋": [],
            "近卫": [],
            "重装": [],
            "狙击": [],
            "术师": [],
            "医疗": [],
            "辅助": [],
            "特种": []
        },
        "3": {
            "先锋": [],
            "近卫": [],
            "重装": [
                "卡缇"
            ],
            "狙击": [
                "克洛丝",
                "空爆"
            ],
            "术师": [],
            "医疗": [],
            "辅助": [],
            "特种": []
        },
        "4": {
            "先锋": [],
            "近卫": [
                "刻刀"
            ],
            "重装": [],
            "狙击": [],
            "术师": [
                "卡达"
            ],
            "医疗": [],
            "辅助": [],
            "特种": []
        },
        "5": {
            "先锋": [],
            "近卫": [],
            "重装": [
                "可颂"
            ],
            "狙击": [],
            "术师": [
                "苦艾"
            ],
            "医疗": [],
            "辅助": [
                "空"
            ],
            "特种": [
                "卡夫卡",
                "空构"
            ]
        },
        "6": {
            "先锋": [],
            "近卫": [],
            "重装": [],
            "狙击": [
                "空弦"
            ],
            "术师": [
                "刻俄柏",
                "卡涅利安"
            ],
            "医疗": [
                "凯尔希"
            ],
            "辅助": [],
            "特种": [
                "傀影"
            ]
        }
    },
    "l": {
        "1": {
            "先锋": [],
            "近卫": [],
            "重装": [],
            "狙击": [],
            "术师": [],
            "医疗": [
                "Lancet-2"
            ],
            "辅助": [],
            "特种": []
        },
        "2": {
            "先锋": [],
            "近卫": [],
            "重装": [],
            "狙击": [],
            "术师": [],
            "医疗": [],
            "辅助": [],
            "特种": []
        },
        "3": {
            "先锋": [
                "翎羽"
            ],
            "近卫": [],
            "重装": [],
            "狙击": [],
            "术师": [],
            "医疗": [],
            "辅助": [],
            "特种": []
        },
        "4": {
            "先锋": [],
            "近卫": [
                "猎蜂",
                "罗小黑"
            ],
            "重装": [],
            "狙击": [
                "流星"
            ],
            "术师": [],
            "医疗": [],
            "辅助": [
                "罗比菈塔"
            ],
            "特种": [
                "砾"
            ]
        },
        "5": {
            "先锋": [
                "凛冬"
            ],
            "近卫": [
                "拉普兰德",
                "龙舌兰",
                "烈夏"
            ],
            "重装": [
                "临光",
                "雷蛇"
            ],
            "狙击": [
                "蓝毒"
            ],
            "术师": [
                "莱恩哈特",
                "洛洛"
            ],
            "医疗": [],
            "辅助": [
                "掠风",
                "凛视"
            ],
            "特种": [
                "罗宾"
            ]
        },
        "6": {
            "先锋": [],
            "近卫": [],
            "重装": [],
            "狙击": [
                "莱伊"
            ],
            "术师": [
                "林"
            ],
            "医疗": [
                "流明"
            ],
            "辅助": [
                "铃兰",
                "灵知",
                "令"
            ],
            "特种": [
                "老鲤",
                "琳琅诗怀雅"
            ]
        }
    },
    "m": {
        "1": {
            "先锋": [],
            "近卫": [],
            "重装": [],
            "狙击": [],
            "术师": [],
            "医疗": [],
            "辅助": [],
            "特种": []
        },
        "2": {
            "先锋": [],
            "近卫": [],
            "重装": [],
            "狙击": [],
            "术师": [],
            "医疗": [],
            "辅助": [],
            "特种": []
        },
        "3": {
            "先锋": [],
            "近卫": [
                "玫兰莎"
            ],
            "重装": [
                "米格鲁"
            ],
            "狙击": [],
            "术师": [],
            "医疗": [],
            "辅助": [],
            "特种": []
        },
        "4": {
            "先锋": [],
            "近卫": [
                "慕斯"
            ],
            "重装": [],
            "狙击": [
                "梅"
            ],
            "术师": [],
            "医疗": [
                "末药"
            ],
            "辅助": [],
            "特种": []
        },
        "5": {
            "先锋": [
                "谜图"
            ],
            "近卫": [
                "摩根"
            ],
            "重装": [
                "暮落"
            ],
            "狙击": [
                "玫拉"
            ],
            "术师": [
                "蜜蜡"
            ],
            "医疗": [
                "蜜莓",
                "明椒"
            ],
            "辅助": [
                "梅尔"
            ],
            "特种": []
        },
        "6": {
            "先锋": [
                "缪尔赛思"
            ],
            "近卫": [
                "玛恩纳"
            ],
            "重装": [],
            "狙击": [
                "迷迭香"
            ],
            "术师": [
                "莫斯提马"
            ],
            "医疗": [],
            "辅助": [
                "麦哲伦"
            ],
            "特种": []
        }
    },
    "n": {
        "1": {
            "先锋": [],
            "近卫": [],
            "重装": [],
            "狙击": [],
            "术师": [],
            "医疗": [],
            "辅助": [],
            "特种": []
        },
        "2": {
            "先锋": [],
            "近卫": [],
            "重装": [],
            "狙击": [],
            "术师": [],
            "医疗": [],
            "辅助": [],
            "特种": []
        },
        "3": {
            "先锋": [],
            "近卫": [],
            "重装": [],
            "狙击": [],
            "术师": [],
            "医疗": [],
            "辅助": [],
            "特种": []
        },
        "4": {
            "先锋": [],
            "近卫": [],
            "重装": [],
            "狙击": [],
            "术师": [],
            "医疗": [],
            "辅助": [],
            "特种": []
        },
        "5": {
            "先锋": [],
            "近卫": [],
            "重装": [],
            "狙击": [],
            "术师": [],
            "医疗": [],
            "辅助": [],
            "特种": []
        },
        "6": {
            "先锋": [],
            "近卫": [],
            "重装": [
                "年",
                "泥岩"
            ],
            "狙击": [
                "能天使"
            ],
            "术师": [],
            "医疗": [],
            "辅助": [],
            "特种": []
        }
    },
    "o": {
        "1": {
            "先锋": [],
            "近卫": [],
            "重装": [],
            "狙击": [],
            "术师": [],
            "医疗": [],
            "辅助": [],
            "特种": []
        },
        "2": {
            "先锋": [],
            "近卫": [],
            "重装": [],
            "狙击": [],
            "术师": [],
            "医疗": [],
            "辅助": [],
            "特种": []
        },
        "3": {
            "先锋": [],
            "近卫": [],
            "重装": [],
            "狙击": [],
            "术师": [],
            "医疗": [],
            "辅助": [],
            "特种": []
        },
        "4": {
            "先锋": [],
            "近卫": [],
            "重装": [],
            "狙击": [],
            "术师": [],
            "医疗": [],
            "辅助": [],
            "特种": []
        },
        "5": {
            "先锋": [],
            "近卫": [],
            "重装": [],
            "狙击": [],
            "术师": [],
            "医疗": [],
            "辅助": [],
            "特种": []
        },
        "6": {
            "先锋": [],
            "近卫": [],
            "重装": [],
            "狙击": [],
            "术师": [],
            "医疗": [],
            "辅助": [],
            "特种": []
        }
    },
    "p": {
        "1": {
            "先锋": [],
            "近卫": [],
            "重装": [],
            "狙击": [],
            "术师": [],
            "医疗": [],
            "辅助": [],
            "特种": []
        },
        "2": {
            "先锋": [],
            "近卫": [],
            "重装": [],
            "狙击": [],
            "术师": [],
            "医疗": [],
            "辅助": [],
            "特种": []
        },
        "3": {
            "先锋": [],
            "近卫": [
                "泡普卡"
            ],
            "重装": [],
            "狙击": [],
            "术师": [],
            "医疗": [],
            "辅助": [],
            "特种": []
        },
        "4": {
            "先锋": [],
            "近卫": [],
            "重装": [
                "泡泡"
            ],
            "狙击": [],
            "术师": [],
            "医疗": [],
            "辅助": [],
            "特种": []
        },
        "5": {
            "先锋": [],
            "近卫": [],
            "重装": [],
            "狙击": [
                "普罗旺斯"
            ],
            "术师": [
                "Pith"
            ],
            "医疗": [],
            "辅助": [],
            "特种": []
        },
        "6": {
            "先锋": [],
            "近卫": [
                "帕拉斯"
            ],
            "重装": [],
            "狙击": [],
            "术师": [],
            "医疗": [],
            "辅助": [],
            "特种": []
        }
    },
    "q": {
        "1": {
            "先锋": [],
            "近卫": [],
            "重装": [],
            "狙击": [],
            "术师": [],
            "医疗": [],
            "辅助": [],
            "特种": []
        },
        "2": {
            "先锋": [],
            "近卫": [],
            "重装": [],
            "狙击": [],
            "术师": [],
            "医疗": [],
            "辅助": [],
            "特种": []
        },
        "3": {
            "先锋": [],
            "近卫": [],
            "重装": [],
            "狙击": [],
            "术师": [],
            "医疗": [],
            "辅助": [],
            "特种": []
        },
        "4": {
            "先锋": [
                "清道夫"
            ],
            "近卫": [],
            "重装": [],
            "狙击": [
                "铅踝"
            ],
            "术师": [],
            "医疗": [
                "清流"
            ],
            "辅助": [],
            "特种": []
        },
        "5": {
            "先锋": [
                "青枳"
            ],
            "近卫": [],
            "重装": [],
            "狙击": [],
            "术师": [],
            "医疗": [],
            "辅助": [],
            "特种": [
                "绮良"
            ]
        },
        "6": {
            "先锋": [
                "琴柳"
            ],
            "近卫": [
                "仇白"
            ],
            "重装": [],
            "狙击": [],
            "术师": [],
            "医疗": [],
            "辅助": [],
            "特种": [
                "麒麟R夜刀"
            ]
        }
    },
    "r": {
        "1": {
            "先锋": [],
            "近卫": [],
            "重装": [],
            "狙击": [],
            "术师": [],
            "医疗": [],
            "辅助": [],
            "特种": []
        },
        "2": {
            "先锋": [],
            "近卫": [],
            "重装": [],
            "狙击": [],
            "术师": [],
            "医疗": [],
            "辅助": [],
            "特种": []
        },
        "3": {
            "先锋": [],
            "近卫": [],
            "重装": [],
            "狙击": [],
            "术师": [],
            "医疗": [],
            "辅助": [],
            "特种": []
        },
        "4": {
            "先锋": [],
            "近卫": [],
            "重装": [],
            "狙击": [],
            "术师": [],
            "医疗": [],
            "辅助": [],
            "特种": []
        },
        "5": {
            "先锋": [],
            "近卫": [],
            "重装": [],
            "狙击": [
                "熔泉"
            ],
            "术师": [],
            "医疗": [],
            "辅助": [],
            "特种": []
        },
        "6": {
            "先锋": [],
            "近卫": [],
            "重装": [],
            "狙击": [],
            "术师": [],
            "医疗": [],
            "辅助": [],
            "特种": []
        }
    },
    "s": {
        "1": {
            "先锋": [],
            "近卫": [],
            "重装": [],
            "狙击": [],
            "术师": [],
            "医疗": [],
            "辅助": [],
            "特种": []
        },
        "2": {
            "先锋": [],
            "近卫": [],
            "重装": [],
            "狙击": [],
            "术师": [
                "12F"
            ],
            "医疗": [],
            "辅助": [],
            "特种": []
        },
        "3": {
            "先锋": [],
            "近卫": [],
            "重装": [],
            "狙击": [],
            "术师": [
                "史都华德"
            ],
            "医疗": [],
            "辅助": [],
            "特种": []
        },
        "4": {
            "先锋": [],
            "近卫": [
                "霜叶",
                "石英"
            ],
            "重装": [
                "蛇屠箱"
            ],
            "狙击": [
                "酸糖",
                "松果"
            ],
            "术师": [
                "深靛"
            ],
            "医疗": [
                "苏苏洛"
            ],
            "辅助": [
                "深海色"
            ],
            "特种": []
        },
        "5": {
            "先锋": [],
            "近卫": [
                "Sharp",
                "诗怀雅",
                "燧石"
            ],
            "重装": [
                "石棉",
                "闪击",
                "深律"
            ],
            "狙击": [
                "Stormeye",
                "守林人",
                "送葬人",
                "慑砂",
                "四月"
            ],
            "术师": [
                "蚀清"
            ],
            "医疗": [
                "桑葚"
            ],
            "辅助": [],
            "特种": [
                "狮蝎",
                "食铁兽",
                "霜华",
                "双月"
            ]
        },
        "6": {
            "先锋": [
                "伺夜"
            ],
            "近卫": [
                "斯卡蒂",
                "史尔特尔",
                "山",
                "圣约送葬人"
            ],
            "重装": [
                "塞雷娅",
                "森蚺",
                "黍"
            ],
            "狙击": [],
            "术师": [],
            "医疗": [
                "闪灵"
            ],
            "辅助": [
                "塑心"
            ],
            "特种": [
                "水月"
            ]
        }
    },
    "t": {
        "1": {
            "先锋": [],
            "近卫": [],
            "重装": [],
            "狙击": [
                "泰拉大陆调查团"
            ],
            "术师": [],
            "医疗": [],
            "辅助": [],
            "特种": [
                "THRM-EX"
            ]
        },
        "2": {
            "先锋": [],
            "近卫": [],
            "重装": [],
            "狙击": [],
            "术师": [],
            "医疗": [],
            "辅助": [],
            "特种": []
        },
        "3": {
            "先锋": [],
            "近卫": [],
            "重装": [],
            "狙击": [],
            "术师": [],
            "医疗": [],
            "辅助": [],
            "特种": []
        },
        "4": {
            "先锋": [
                "桃金娘"
            ],
            "近卫": [],
            "重装": [],
            "狙击": [],
            "术师": [],
            "医疗": [
                "调香师"
            ],
            "辅助": [],
            "特种": []
        },
        "5": {
            "先锋": [],
            "近卫": [],
            "重装": [],
            "狙击": [],
            "术师": [
                "天火",
                "特米米"
            ],
            "医疗": [
                "Touch",
                "图耶"
            ],
            "辅助": [],
            "特种": []
        },
        "6": {
            "先锋": [
                "推进之王"
            ],
            "近卫": [],
            "重装": [],
            "狙击": [
                "提丰"
            ],
            "术师": [],
            "医疗": [],
            "辅助": [],
            "特种": []
        }
    },
    "u": {
        "1": {
            "先锋": [],
            "近卫": [],
            "重装": [],
            "狙击": [],
            "术师": [],
            "医疗": [],
            "辅助": [
                "U-Official"
            ],
            "特种": []
        },
        "2": {
            "先锋": [],
            "近卫": [],
            "重装": [],
            "狙击": [],
            "术师": [],
            "医疗": [],
            "辅助": [],
            "特种": []
        },
        "3": {
            "先锋": [],
            "近卫": [],
            "重装": [],
            "狙击": [],
            "术师": [],
            "医疗": [],
            "辅助": [],
            "特种": []
        },
        "4": {
            "先锋": [],
            "近卫": [],
            "重装": [],
            "狙击": [],
            "术师": [],
            "医疗": [],
            "辅助": [],
            "特种": []
        },
        "5": {
            "先锋": [],
            "近卫": [],
            "重装": [],
            "狙击": [],
            "术师": [],
            "医疗": [],
            "辅助": [],
            "特种": []
        },
        "6": {
            "先锋": [],
            "近卫": [],
            "重装": [],
            "狙击": [],
            "术师": [],
            "医疗": [],
            "辅助": [],
            "特种": []
        }
    },
    "v": {
        "1": {
            "先锋": [],
            "近卫": [],
            "重装": [],
            "狙击": [],
            "术师": [],
            "医疗": [],
            "辅助": [],
            "特种": []
        },
        "2": {
            "先锋": [],
            "近卫": [],
            "重装": [],
            "狙击": [],
            "术师": [],
            "医疗": [],
            "辅助": [],
            "特种": []
        },
        "3": {
            "先锋": [],
            "近卫": [],
            "重装": [],
            "狙击": [],
            "术师": [],
            "医疗": [],
            "辅助": [],
            "特种": []
        },
        "4": {
            "先锋": [],
            "近卫": [],
            "重装": [],
            "狙击": [],
            "术师": [],
            "医疗": [],
            "辅助": [],
            "特种": []
        },
        "5": {
            "先锋": [],
            "近卫": [],
            "重装": [],
            "狙击": [],
            "术师": [],
            "医疗": [],
            "辅助": [],
            "特种": []
        },
        "6": {
            "先锋": [],
            "近卫": [],
            "重装": [],
            "狙击": [],
            "术师": [],
            "医疗": [],
            "辅助": [],
            "特种": []
        }
    },
    "w": {
        "1": {
            "先锋": [],
            "近卫": [],
            "重装": [],
            "狙击": [],
            "术师": [],
            "医疗": [],
            "辅助": [],
            "特种": []
        },
        "2": {
            "先锋": [],
            "近卫": [],
            "重装": [],
            "狙击": [],
            "术师": [],
            "医疗": [],
            "辅助": [],
            "特种": []
        },
        "3": {
            "先锋": [],
            "近卫": [],
            "重装": [],
            "狙击": [],
            "术师": [],
            "医疗": [],
            "辅助": [],
            "特种": []
        },
        "4": {
            "先锋": [],
            "近卫": [],
            "重装": [],
            "狙击": [],
            "术师": [],
            "医疗": [],
            "辅助": [],
            "特种": [
                "维荻"
            ]
        },
        "5": {
            "先锋": [
                "苇草",
                "万顷"
            ],
            "近卫": [],
            "重装": [],
            "狙击": [],
            "术师": [
                "温米"
            ],
            "医疗": [
                "微风"
            ],
            "辅助": [
                "巫恋"
            ],
            "特种": [
                "乌有"
            ]
        },
        "6": {
            "先锋": [],
            "近卫": [
                "薇薇安娜"
            ],
            "重装": [],
            "狙击": [
                "W"
            ],
            "术师": [],
            "医疗": [],
            "辅助": [],
            "特种": [
                "温蒂"
            ]
        }
    },
    "x": {
        "1": {
            "先锋": [],
            "近卫": [],
            "重装": [],
            "狙击": [],
            "术师": [],
            "医疗": [],
            "辅助": [],
            "特种": []
        },
        "2": {
            "先锋": [],
            "近卫": [],
            "重装": [],
            "狙击": [
                "巡林者"
            ],
            "术师": [],
            "医疗": [],
            "辅助": [],
            "特种": []
        },
        "3": {
            "先锋": [
                "香草"
            ],
            "近卫": [],
            "重装": [],
            "狙击": [],
            "术师": [],
            "医疗": [],
            "辅助": [],
            "特种": []
        },
        "4": {
            "先锋": [
                "讯使"
            ],
            "近卫": [
                "休谟斯"
            ],
            "重装": [],
            "狙击": [],
            "术师": [],
            "医疗": [],
            "辅助": [],
            "特种": []
        },
        "5": {
            "先锋": [
                "晓歌"
            ],
            "近卫": [
                "星极"
            ],
            "重装": [],
            "狙击": [],
            "术师": [
                "星源",
                "雪绒"
            ],
            "医疗": [
                "锡兰",
                "絮雨"
            ],
            "辅助": [
                "稀音",
                "夏栎",
                "小满"
            ],
            "特种": [
                "雪雉",
                "杏仁"
            ]
        },
        "6": {
            "先锋": [],
            "近卫": [],
            "重装": [
                "星熊",
                "瑕光"
            ],
            "狙击": [],
            "术师": [
                "夕"
            ],
            "医疗": [],
            "辅助": [],
            "特种": []
        }
    },
    "y": {
        "1": {
            "先锋": [],
            "近卫": [],
            "重装": [],
            "狙击": [],
            "术师": [],
            "医疗": [],
            "辅助": [],
            "特种": []
        },
        "2": {
            "先锋": [
                "夜刀"
            ],
            "近卫": [],
            "重装": [],
            "狙击": [],
            "术师": [],
            "医疗": [],
            "辅助": [],
            "特种": []
        },
        "3": {
            "先锋": [],
            "近卫": [
                "月见夜"
            ],
            "重装": [],
            "狙击": [],
            "术师": [
                "炎熔"
            ],
            "医疗": [],
            "辅助": [],
            "特种": []
        },
        "4": {
            "先锋": [],
            "近卫": [
                "宴"
            ],
            "重装": [],
            "狙击": [
                "跃跃"
            ],
            "术师": [
                "夜烟",
                "远山"
            ],
            "医疗": [],
            "辅助": [],
            "特种": [
                "伊桑"
            ]
        },
        "5": {
            "先锋": [
                "郁金香",
                "野鬃",
                "夜半"
            ],
            "近卫": [
                "因陀罗",
                "幽灵鲨",
                "炎客",
                "羽毛笔",
                "医生"
            ],
            "重装": [
                "洋灰"
            ],
            "狙击": [
                "陨星",
                "隐现"
            ],
            "术师": [
                "夜魔",
                "炎狱炎熔",
                "耶拉"
            ],
            "医疗": [
                "亚叶"
            ],
            "辅助": [
                "月禾"
            ],
            "特种": [
                "崖心"
            ]
        },
        "6": {
            "先锋": [
                "焰尾",
                "伊内丝"
            ],
            "近卫": [
                "银灰",
                "耀骑士临光"
            ],
            "重装": [],
            "狙击": [
                "远牙"
            ],
            "术师": [
                "伊芙利特",
                "异客"
            ],
            "医疗": [
                "夜莺",
                "焰影苇草"
            ],
            "辅助": [],
            "特种": []
        }
    },
    "z": {
        "1": {
            "先锋": [],
            "近卫": [],
            "重装": [],
            "狙击": [
                "正义骑士号"
            ],
            "术师": [],
            "医疗": [],
            "辅助": [],
            "特种": []
        },
        "2": {
            "先锋": [],
            "近卫": [],
            "重装": [],
            "狙击": [],
            "术师": [],
            "医疗": [],
            "辅助": [],
            "特种": []
        },
        "3": {
            "先锋": [],
            "近卫": [],
            "重装": [],
            "狙击": [],
            "术师": [],
            "医疗": [],
            "辅助": [
                "梓兰"
            ],
            "特种": []
        },
        "4": {
            "先锋": [],
            "近卫": [],
            "重装": [],
            "狙击": [],
            "术师": [],
            "医疗": [],
            "辅助": [],
            "特种": []
        },
        "5": {
            "先锋": [],
            "近卫": [
                "铸铁",
                "战车"
            ],
            "重装": [],
            "狙击": [
                "子月"
            ],
            "术师": [
                "至简",
                "折光"
            ],
            "医疗": [
                "濯尘芙蓉"
            ],
            "辅助": [
                "真理"
            ],
            "特种": []
        },
        "6": {
            "先锋": [],
            "近卫": [
                "止颂",
                "左乐"
            ],
            "重装": [],
            "狙击": [
                "早露"
            ],
            "术师": [],
            "医疗": [],
            "辅助": [
                "浊心斯卡蒂"
            ],
            "特种": []
        }
    }
}

const JOBS = ['先锋', '近卫', '重装', '狙击', '术师', '医疗', '辅助', '特种'];

let last_checked_version = '';

let current_sub_content = '';
let current_selected_type = 'a';
let current_selected_star = '6';
let current_selected_job = new Set(JOBS);


function save_settings() {
    if (!window.localStorage) {
        console.error('浏览器不支持localStorage');
    }
    else {
        console.log('保存设置');
        let storage = window.localStorage;
        let data_to_save = {
            'last_checked_version': last_checked_version,
        };
        storage['data_ji_erfen'] = JSON.stringify(data_to_save);
        return true;
    }
}

function load_settings() {
    if (!window.localStorage) {
        console.error("浏览器不支持localStorage");
    }
    else {
        console.log('加载已保存的设置');
        if (!('data_ji_erfen' in window.localStorage)) {
            console.log('没有找到已保存的设置');
            return false;
        }
        let data = JSON.parse(window.localStorage['data_ji_erfen']);
        // 最后确认过的版本号
        if ('last_checked_version' in data) {
            last_checked_version = data['last_checked_version'];
        }
        return true;
    }
}

function load_contents() {
    let current_timestamp = new Date().getTime();
    console.log('开始加载文档');
    console.time('加载文档');
    fetch(`${CONTENTS['document']['file_path']}?t=${current_timestamp}`)
    .then(response => response.text())
    .then(doc => {
        document.getElementById('div_document').innerHTML = doc;
        console.timeEnd('加载文档');
    })
    .catch(err => {
        console.error(err);
    });

    console.log('开始加载更新日志');
    console.time('加载更新日志');
    fetch(`${CONTENTS['update_log']['file_path']}?t=${current_timestamp}`)
    .then(response => response.text())
    .then(doc => {
        document.getElementById('div_update_log').innerHTML = doc;
        handle_red_spot('update_log');
        console.timeEnd('加载更新日志');
    })
    .catch(err => {
        console.error(err);
    });

}

function init_version() {
    document.getElementById('span_version').innerHTML = VERSION;
    console.log(`${NAME} ${VERSION} 启动！`);
}

function handle_red_spot(name) {
    if (name == 'update_log') {
        // 更新日志
        if (last_checked_version == VERSION) {
            document.getElementById('div_red_spot_version').style.display = 'none';
            document.getElementById('div_red_spot_update_log').style.display = 'none';
            document.getElementById('div_version').onclick = null;
            document.getElementById('div_version').style.cursor = 'auto';
        }
        else {
            console.log('在更新日志中检测到未确认过的新版本');
            document.getElementById('div_red_spot_version').style.display = '';
            document.getElementById('div_red_spot_update_log').style.display = '';
            document.getElementById('div_version').onclick = () => {handle_sub_content('update_log');}
            document.getElementById('div_version').style.cursor = 'pointer';
        }
    }
}

function update_last_checked_version() {
    last_checked_version = VERSION;
}

function update_current_datetime() {
    let now = new Date();
    let new_datetime = `${now.toLocaleDateString("zh-CN")} ${now.toLocaleTimeString("zh-CN").slice(0, 5)}`;
    if (document.getElementById('div_current_datetime').innerHTML != new_datetime) {
        document.getElementById('div_current_datetime').innerHTML = new_datetime;
    }
    setTimeout(update_current_datetime, 1000);
}

function update_current_operators() {
    console.log(current_selected_type, current_selected_star, current_selected_job.values())
    document.getElementById('th_type_a').style.backgroundColor = '';
    document.getElementById('th_type_b').style.backgroundColor = '';
    document.getElementById('th_star_6').style.backgroundColor = '';
    document.getElementById('th_star_5').style.backgroundColor = '';
    document.getElementById('th_star_4321').style.backgroundColor = '';
    document.getElementById(`th_type_${current_selected_type}`).style.backgroundColor = '#FEDCBA';
    document.getElementById(`th_star_${current_selected_star}`).style.backgroundColor = '#ABCDEF';
    for(let job of JOBS) {
        if (current_selected_job.has(job)) {
            document.getElementById(`th_job_${job}`).style.color = '#0b6fde';
        }
        else {
            document.getElementById(`th_job_${job}`).style.color = '';
        }
    }
    let target_initials = current_selected_type == 'a' ? 'abcdefghijklm' : 'nopqrstuvwxyz';
    let current_operators = {};

    for(let job of JOBS) {
        if (!current_selected_job.has(job)) {
            continue;
        }
        current_operators[job] = [];
        for (let i = 0; i < target_initials.length; i++) {
            for (let j = 0; j < current_selected_star.length; j++) {
                for (let k = 0; k < ALL_OPERATORS_BY_INITIAL[target_initials[i]][current_selected_star[j]][job].length; k++) {
                    current_operators[job].push(ALL_OPERATORS_BY_INITIAL[target_initials[i]][current_selected_star[j]][job][k]);
                }
            }
        }
    }
    let result = '';
    if (current_selected_job.size) {
        for(let job of JOBS) {
            if (!current_selected_job.has(job)) {
                continue;
            }
            result += `<p>${current_operators[job].join('、')}</p>`;
        }
    }
    else {
        result = '（空）'
    }
    document.getElementById('td_current_operators').innerHTML = result;
}

function handle_filter(key, value) {
    console.log(`handle_filter('${key}', '${value}')`)
    if (key == 'type') {
        current_selected_type = value;
    }
    if (key == 'star') {
        current_selected_star = value;
    }
    if (key == 'job') {
        if (current_selected_job.has(value)) {
            current_selected_job.delete(value);
        }
        else {
            current_selected_job.add(value);
        }
    }
    update_current_operators();
}

function handle_input_keypress(event) {
    let keyCode;
    if (event.which) {
        keyCode = event.which;
    }
    else if (e.keyCode) {
        keyCode = event.keyCode;
    }
    if (keyCode == 13) {
        get_opening_today();
    }
}

function handle_click_copy(target) {
    console.log('点击复制');
    let input = document.getElementById('textarea_copy');
    let text = document.getElementById(target).innerText;
    input.value = text; // 修改文本框的内容
    input.select(); // 选中文本
    document.execCommand('copy'); // 执行浏览器复制命令
    document.getElementById(`${target}_copied`).style.display = '';
    setTimeout(() => {document.getElementById(`${target}_copied`).style.display = 'none';}, 3000);
    console.log('复制成功');
}

function handle_sub_content(name) {
    if (name != undefined && current_sub_content == '') {
        console.log(`打开 ${name}`);
        current_sub_content = name;
        // document.body.style.overflow = 'hidden';
        document.body.style.backgroundColor = '#dddd';
        document.getElementById('table_sub_content_header').style.display = '';
        document.getElementById(`div_${name}`).style.display = '';
        document.getElementById(`table_main_navbar`).style.display = 'none';
        document.getElementById(`div_main`).style.display = 'none';
        document.getElementById('span_overlay_header_icon').innerHTML = CONTENTS[name]['icon'];
        document.getElementById('span_overlay_header_title').innerHTML = CONTENTS[name]['title'];
        
        if (name == 'update_log') {
            console.log('已确认最新版本');
            update_last_checked_version();
            save_settings();
        }
    }
    else {
        console.log(`关闭 ${current_sub_content}`);
        handle_red_spot(current_sub_content);
        document.body.style.backgroundColor = '#FFF';
        document.getElementById('table_sub_content_header').style.display = 'none';
        document.getElementById(`div_${current_sub_content}`).style.display = 'none';
        document.getElementById(`table_main_navbar`).style.display = '';
        document.getElementById(`div_main`).style.display = '';
        // document.body.style.overflow = 'auto';
        current_sub_content = '';
    }
}

function handle_box_settings(mode) {
    if (mode == 1) {
        document.getElementById('table_box_deck').style.display = 'none';
        document.getElementById('div_button_settings_deck').innerHTML = "展开卡组";
        if (document.getElementById('table_box_basic').style.display == 'none') {
            document.getElementById('table_box_basic').style.display = '';
            document.getElementById('div_button_settings_box').innerHTML = "收起box";
        }
        else {
            document.getElementById('table_box_basic').style.display = 'none';
            document.getElementById('div_button_settings_box').innerHTML = '展开box';
        }
    }
    else if (mode == 2) {
        document.getElementById('table_box_basic').style.display = 'none';
        document.getElementById('div_button_settings_box').innerHTML = '展开box';
        if (document.getElementById('table_box_deck').style.display == 'none') {
            document.getElementById('table_box_deck').style.display = '';
            document.getElementById('div_button_settings_deck').innerHTML = "收起卡组";
        }
        else {
            document.getElementById('table_box_deck').style.display = 'none';
            document.getElementById('div_button_settings_deck').innerHTML = "展开卡组";
        }
    }
}

